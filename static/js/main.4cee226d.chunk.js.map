{"version":3,"sources":["Asset/asset.ts","AssetEditor/LabeledInputs.tsx","AssetEditor/DetailsEditor/AbilitiesEdit.tsx","AssetEditor/DetailsEditor/TopEdit.tsx","AssetEditor/DetailsEditor/TrackEdit.tsx","Asset/fonts.ts","AssetEditor/DetailsEditor/FontsEdit.tsx","AssetEditor/DetailsEditor/DetailsEditor.tsx","AssetEditor/AssetEditor.tsx","Asset/assetTransformation.ts","Asset/assetScaling.ts","Asset/AssetDisplay.tsx","Asset/sanitize.ts","Export/Download.tsx","Collections/AssetChoice.tsx","Collections/AssetSelection.tsx","Asset/exampleAssets.ts","Collections/AssetCardButton.tsx","Collections/AssetCreation.tsx","Footer.tsx","App.tsx","Collections/collectionTransformation.ts","Collections/collection.ts","index.tsx"],"names":["extractPropertyValue","key","svgString","regexp","RegExp","match","transformSvgString","d","fill","fillOpacity","viewBox","LabeledTextInput","props","className","label","type","id","value","onChange","handleChange","LabeledTextAreaInput","LabeledCheckBox","checked","LabeledNumberInput","step","min","max","e","currentTarget","AbilityInput","ability","name","updateAbility","filled","onClick","removeAbility","text","AbilitiesEdit","index","this","currentAsset","abilities","updateAsset","splice","push","map","changed","addAbility","React","Component","TopEdit","writeIn","askToDelete","description","href","target","rel","htmlFor","defaultValue","icon","handleIconImport","LabeledRadioInput","TrackEdit","track","clone","cloneDeep","handleTrackTypeChange","Array","isArray","handleNumericalTrackChange","join","values","split","val","trim","defaultFontConfig","assetTypeFontSize","assetTypeFont","assetNameFontSize","assetNameFont","detailsFontSize","detailsFont","trackFontSize","trackFont","makeMergedConfig","config","merged","Object","assign","makeFontStyles","unmergedFonts","fonts","toFontFamily","font","fontName","replace","googleFontUrl","urlifiedFonts","from","Set","filter","createGoogleFontString","fontFamily","fontSize","assetName","details","FontInputs","idPrefix","handleFontChange","em","size","handleSizeChange","FontsEdit","configuredFonts","useState","updateFonts","setFontProperty","newFonts","setSizeProperty","ViewSwitchButton","classes","view","activeView","handleClick","children","ViewSwitcher","switchView","DetailsEditor","state","editorJSON","errorText","setState","json","JSON","parse","error","toString","iconFileInput","document","querySelector","iconAuthorInput","file","files","fileReader","FileReader","onload","svg","result","slice","author","readAsText","alert","asset","spellCheck","stringify","handleJSONChange","resetEditorJson","previewAssetImage","downloadAssetImage","SidePanel","handleAssetScaleChange","assetScale","showScreen","transformToLatest","schema","documentFormatVersion","v1","v2","transformToV2","scaleRatio","full","WriteIn","Description","AbilityDisplay","sanitizedText","sanitizer","allowedTags","allowedAttributes","dangerouslySetInnerHTML","__html","TrackValue","xmlns","version","preserveAspectRatio","height","scale","width","x1","y1","x2","y2","stroke","style","strokeWidth","TrackDisplay","innerEntries","entry","trackLength","Math","i","IconDisplay","AssetDisplay","Download","canvas","link","createElement","toDataURL","download","body","appendChild","click","removeChild","window","scrollTo","render","html2canvas","firstChild","allowTaint","then","preview","src","alt","goBackToMain","saveImage","AssetChoice","transformedAsset","AssetSelection","assets","chooseAsset","showNewScreen","ironclad","lightbearer","caveLion","AssetCardButton","AssetCreation","createAsset","createBlankAsset","example","showChooseScreen","Footer","sussCurrentCollection","maybeCollections","maybeAsset","length","createCollection","App","startingCollection","maybeGetLocalCollections","maybeGetLocalAsset","startingScale","innerHeight","currentAssetIndex","currentCollection","currentScreen","previewDownload","localStorage","getItem","newScale","collection","setItem","persistCollection","confirm","screen","ReactDOM"],"mappings":"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","file":"static/js/main.4cee226d.chunk.js","sourcesContent":["export type SvgIconV1 = {\n  type: \"svg\";\n  author: string;\n  name: string;\n  svg: string;\n};\n\nexport type SvgProperties = {\n  d: string;\n  fill: string;\n  fillOpacity: string;\n  viewBox: string;\n};\n\nexport type SvgIcon = {\n  type: \"svg\";\n  author: string;\n  name: string;\n  svg: SvgProperties;\n};\n\nexport type Ability = {\n  filled: boolean;\n  name?: string;\n  text: string;\n};\n\nexport type AssetDocumentV1 = {\n  documentFormatVersion?: number;\n  fonts?: {\n    assetTypeFontSize?: string;\n    assetTypeFont?: string;\n    assetNameFontSize?: string;\n    assetNameFont?: string;\n    detailsFontSize?: string;\n    detailsFont?: string;\n    trackFontSize?: string;\n    trackFont?: string;\n  };\n  type: string;\n  name: string;\n  writeIn?: string;\n  track?: number | string[];\n  description: string;\n  abilities: Array<{ filled: boolean; name?: string; text: string }>;\n  icon?: string | SvgIconV1;\n};\n\nexport interface AssetDocument {\n  documentFormatVersion: number;\n  fonts?: {\n    assetTypeFontSize?: string;\n    assetTypeFont?: string;\n    assetNameFontSize?: string;\n    assetNameFont?: string;\n    detailsFontSize?: string;\n    detailsFont?: string;\n    trackFontSize?: string;\n    trackFont?: string;\n  };\n  type: string;\n  name: string;\n  writeIn?: string;\n  track?: number | string[];\n  description: string;\n  abilities: Array<Ability>;\n  icon?: string | SvgIcon;\n}\n\nexport interface UnspecifiedAssetDocument {\n  documentFormatVersion?: number;\n  type: string;\n  name: string;\n}\n\nexport function createBlankAsset(properties = {}): AssetDocument {\n  return {\n    documentFormatVersion: 2,\n    abilities: [],\n    description: \"\",\n    name: \"\",\n    type: \"\",\n    fonts: {},\n    icon: \"\",\n    track: null,\n    writeIn: \"\",\n  };\n}\n\nconst extractPropertyValue = (key, svgString) => {\n  const regexp = new RegExp(`${key}=(?:\"|')(.*?)(?:\"|')`);\n  return (svgString.match(regexp) || [])[1];\n  //TODO: intelligent error here?\n};\n\nexport function transformSvgString(svgString: string): SvgProperties {\n  return {\n    d: extractPropertyValue(\"d\", svgString),\n    fill: extractPropertyValue(\"fill\", svgString),\n    fillOpacity: extractPropertyValue(\"opacity\", svgString),\n    viewBox: extractPropertyValue(\"viewBox\", svgString),\n  };\n}\n","import React from \"react\";\n\nexport function LabeledTextInput(props: {\n  label: string;\n  value: string;\n  id: string;\n  handleChange(e): void;\n}) {\n  return (\n    <div className=\"text-input\">\n      <label>{props.label}</label>\n      <input\n        type=\"text\"\n        id={props.id}\n        value={props.value}\n        onChange={props.handleChange}\n      ></input>\n    </div>\n  );\n}\n\nexport function LabeledTextAreaInput(props: {\n  label: string;\n  value: string;\n  className: string;\n  handleChange(e): void;\n}) {\n  return (\n    <div className=\"text-input\">\n      <label>{props.label}</label>\n      <textarea\n        className={props.className}\n        value={props.value}\n        onChange={props.handleChange}\n      ></textarea>\n    </div>\n  );\n}\n\nexport function LabeledCheckBox(props: {\n  label: string;\n  value: boolean;\n  className: string;\n  handleChange(e): void;\n}) {\n  return (\n    <div className=\"checkbox-input\">\n      <label>{props.label}</label>\n      <input\n        type=\"checkbox\"\n        className={props.className}\n        checked={props.value}\n        onChange={props.handleChange}\n      ></input>\n    </div>\n  );\n}\n\nexport function LabeledNumberInput(props: {\n  label: string;\n  value: number;\n  step: string;\n  id: string;\n  handleChange(value: number);\n}) {\n  const MAX = 100;\n\n  //number inputs have lots of quirks. Definitely incentive to use a component library.\n  const makeHandleChange = (handleChange: (value: number) => void) => {\n    return (e) => {\n      let value = +e.currentTarget.value;\n      if (value > MAX) {\n        value = MAX;\n      }\n      handleChange(value);\n    };\n  };\n\n  return (\n    <div className=\"number-input\">\n      <label>{props.label}</label>\n      <input\n        type=\"number\"\n        id={props.id}\n        // displaying a non-deletable zero that pads the left is wonky, so '' is preferable here\n        value={+props.value || \"\"}\n        step={props.step}\n        min=\"0\"\n        max={MAX}\n        onChange={makeHandleChange(props.handleChange)}\n      ></input>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { AssetDocument, Ability } from \"../../Asset/asset\";\nimport {\n  LabeledTextInput,\n  LabeledCheckBox,\n  LabeledTextAreaInput,\n} from \"../LabeledInputs\";\n\ntype AbilitiesEditProps = {\n  currentAsset: AssetDocument;\n  updateAsset(asset): void;\n};\n\nfunction AbilityInput(props: {\n  ability: Ability;\n  updateAbility(value): void;\n  removeAbility(ability): void;\n}) {\n  return (\n    <div className=\"ability-input\">\n      <div className=\"ability-input-top\">\n        <div className=\"ability-input-top-fields\">\n          <LabeledTextInput\n            label=\"Name (optional)\"\n            id=\"ability-name-input\"\n            value={props.ability.name || \"\"}\n            handleChange={(e) => {\n              props.ability.name = e.currentTarget.value;\n              props.updateAbility(props.ability);\n            }}\n          ></LabeledTextInput>\n          <LabeledCheckBox\n            label=\"Filled\"\n            className=\"ability-filled-input\"\n            value={props.ability.filled || false}\n            handleChange={(e) => {\n              props.ability.filled = !props.ability.filled;\n              props.updateAbility(props.ability);\n            }}\n          ></LabeledCheckBox>\n        </div>\n        <button\n          className=\"ability-button remove-ability\"\n          onClick={() => props.removeAbility(props.ability)}\n        >\n          remove\n        </button>\n      </div>\n      <LabeledTextAreaInput\n        label=\"Ability Text\"\n        className=\"ability-text-input\"\n        value={props.ability.text || \"\"}\n        handleChange={(e) => {\n          props.ability.text = e.currentTarget.value;\n          props.updateAbility(props.ability);\n        }}\n      ></LabeledTextAreaInput>\n    </div>\n  );\n}\nexport class AbilitiesEdit extends React.Component<AbilitiesEditProps> {\n  updateAbility(ability, index) {\n    this.props.currentAsset.abilities[index] = ability;\n    this.props.updateAsset(this.props.currentAsset);\n  }\n  removeAbility(index) {\n    this.props.currentAsset.abilities.splice(index, 1);\n    this.props.updateAsset(this.props.currentAsset);\n  }\n  addAbility() {\n    this.props.currentAsset.abilities.push({\n      filled: false,\n      name: \"\",\n      text: \"\",\n    });\n    this.props.updateAsset(this.props.currentAsset);\n  }\n  render() {\n    return (\n      <div className=\"editor-view\">\n        <div className=\"vertical\">\n          {this.props.currentAsset.abilities.map((ability, index) => {\n            return (\n              <AbilityInput\n                key={index}\n                ability={ability}\n                updateAbility={(changed) => this.updateAbility(changed, index)}\n                removeAbility={() => this.removeAbility(index)}\n              ></AbilityInput>\n            );\n          })}\n          <button className=\"ability-button\" onClick={() => this.addAbility()}>\n            Add\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { LabeledTextInput, LabeledTextAreaInput } from \"../LabeledInputs\";\nimport { AssetDocument } from \"../../Asset/asset\";\n\ntype TopEditProps = {\n  currentAsset: AssetDocument;\n  updateAsset(asset): void;\n  askToDelete(): void;\n  handleIconImport(): void; //todo: move fully inte here\n};\n\nexport class TopEdit extends React.Component<TopEditProps> {\n  render() {\n    return (\n      <div className=\"editor-view misc-editor-view\">\n        <div className=\"horizontal\">\n          <div className=\"vertical\">\n            <LabeledTextInput\n              label=\"Type\"\n              id=\"asset-type-input\"\n              value={this.props.currentAsset.type}\n              handleChange={(e) => {\n                this.props.currentAsset.type = e.currentTarget.value;\n                this.props.updateAsset(this.props.currentAsset);\n              }}\n            ></LabeledTextInput>\n            <LabeledTextInput\n              label=\"Asset Name\"\n              id=\"asset-name-input\"\n              value={this.props.currentAsset.name}\n              handleChange={(e) => {\n                this.props.currentAsset.name = e.currentTarget.value;\n                this.props.updateAsset(this.props.currentAsset);\n              }}\n            ></LabeledTextInput>\n            <LabeledTextInput\n              label=\"Write-in (optional)\"\n              id=\"asset-write-in-input\"\n              value={this.props.currentAsset.writeIn || \"\"}\n              handleChange={(e) => {\n                this.props.currentAsset.writeIn = e.currentTarget.value;\n                this.props.updateAsset(this.props.currentAsset);\n              }}\n            ></LabeledTextInput>\n          </div>\n          <div>\n            <button onClick={this.props.askToDelete}>DELETE ASSET</button>\n          </div>\n        </div>\n        <LabeledTextAreaInput\n          label=\"Description (optional)\"\n          className=\"asset-description-input\"\n          value={this.props.currentAsset.description}\n          handleChange={(e) => {\n            this.props.currentAsset.description = e.currentTarget.value;\n            this.props.updateAsset(this.props.currentAsset);\n          }}\n        ></LabeledTextAreaInput>\n        <div className=\"icon-import\">\n          <div className=\"icon-import-helptext\">\n            <p>\n              SVG icons are supported. Use a transparent background for best\n              results.\n            </p>\n            <ol>\n              <li>\n                Head over to{\" \"}\n                <a\n                  href=\"https://game-icons.net/\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  GameIcons.net\n                </a>\n                , a wonderful resource of Creative Commons-licensed icons.\n              </li>\n              <li>\n                On the left hand side, with \"Studio\" set to background, set\n                \"Type\" to \"none\" (for a transparent background).\n              </li>\n              <li>Download the icon.</li>\n              <li>\n                Click \"browse...\" under \"Icon to import\" below here and select\n                the just-downloaded icon.\n              </li>\n              <li>Fill in the artist's name and click \"IMPORT\".</li>\n            </ol>\n          </div>\n\n          <div className=\"icon-import-controls\">\n            <div className=\"icon-import-fileselect\">\n              <label htmlFor=\"icon-fileselect\">Icon to import</label>\n              <input type=\"file\" id=\"icon-fileselect\" />\n            </div>\n            <div className=\"icon-import-author\">\n              <label htmlFor=\"icon-author\">Icon Artist</label>\n              <input\n                type=\"text\"\n                id=\"icon-author\"\n                defaultValue={\n                  (this.props.currentAsset.icon || {})[\"author\"] || \"\"\n                }\n              />\n              {/* todo: standardize icon schema across types */}\n            </div>\n            <button\n              id=\"icon-import-button\"\n              onClick={() => this.props.handleIconImport()}\n            >\n              {\" \"}\n              Import{\" \"}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { cloneDeep } from \"lodash\";\nimport { AssetDocument } from \"../../Asset/asset\";\nimport { LabeledTextAreaInput, LabeledNumberInput } from \"../LabeledInputs\";\n\ntype TrackType = \"none\" | \"numerical\" | \"text\";\n\nfunction LabeledRadioInput(props: {\n  label: string;\n  checked: boolean;\n  value: TrackType;\n  onChange(e);\n}) {\n  return (\n    <div>\n      <input\n        type=\"radio\"\n        id={`choose-track-${props.value}`}\n        value={props.value}\n        checked={props.checked}\n        onChange={props.onChange}\n      />\n      <label>{props.label}</label>\n    </div>\n  );\n}\n\ntype TrackEditProps = {\n  currentAsset: AssetDocument; //todo: not require passing in the entire asset to every view\n  updateAsset(asset): void;\n};\n\nexport default class TrackEdit extends React.Component<TrackEditProps> {\n  handleTrackTypeChange(e) {\n    if (e.currentTarget.value === \"none\") {\n      this.props.currentAsset.track = null;\n      this.props.updateAsset(this.props.currentAsset);\n    } else if (e.currentTarget.value === \"numerical\") {\n      this.props.currentAsset.track = 5;\n      this.props.updateAsset(this.props.currentAsset);\n    } else if (e.currentTarget.value === \"text\") {\n      this.props.currentAsset.track = [\"Value 1\", \"Value 2\"];\n      this.props.updateAsset(this.props.currentAsset);\n    }\n  }\n\n  handleNumericalTrackChange(value: number) {\n    let clone = cloneDeep(this.props.currentAsset);\n    clone.track = +value;\n    this.props.updateAsset(clone);\n  }\n\n  render() {\n    return (\n      <div className=\"editor-view\">\n        <label>Type of Track</label>\n        <LabeledRadioInput\n          label=\"No track\"\n          checked={this.props.currentAsset.track == null}\n          onChange={(e) => this.handleTrackTypeChange(e)}\n          value=\"none\"\n        ></LabeledRadioInput>\n        <LabeledRadioInput\n          label=\"Numerical\"\n          checked={typeof this.props.currentAsset.track === \"number\"}\n          onChange={(e) => this.handleTrackTypeChange(e)}\n          value=\"numerical\"\n        ></LabeledRadioInput>\n        <LabeledRadioInput\n          label=\"Text\"\n          checked={Array.isArray(this.props.currentAsset.track)}\n          onChange={(e) => this.handleTrackTypeChange(e)}\n          value=\"text\"\n        ></LabeledRadioInput>\n\n        {typeof this.props.currentAsset.track === \"number\" && (\n          <LabeledNumberInput\n            label=\"Number of Values\"\n            value={this.props.currentAsset.track}\n            step=\"1\"\n            id=\"track-number-input\"\n            handleChange={(e) => this.handleNumericalTrackChange(e)}\n          ></LabeledNumberInput>\n        )}\n\n        {Array.isArray(this.props.currentAsset.track) && (\n          <LabeledTextAreaInput\n            label=\"Options (comma-delimited)\"\n            className=\"track-options-input\"\n            value={this.props.currentAsset.track.join(\", \")}\n            handleChange={(e) => {\n              let values = e.currentTarget.value\n                .split(\",\")\n                .map((val) => val.trim());\n              this.props.currentAsset.track = values; //todo: not mutate at every turn\n              this.props.updateAsset(this.props.currentAsset);\n            }}\n          ></LabeledTextAreaInput>\n        )}\n      </div>\n    );\n  }\n}\n","export interface FontConfig {\n  assetTypeFontSize?: string;\n  assetTypeFont?: string;\n  assetNameFontSize?: string;\n  assetNameFont?: string;\n  detailsFontSize?: string;\n  detailsFont?: string;\n  trackFontSize?: string;\n  trackFont?: string;\n}\n\nexport const createGoogleFontString = (...fonts) => {\n  let urlifiedFonts = Array.from(new Set(fonts))\n    .filter((font) => font)\n    .map((font) => font.replace(/ /g, \"+\"))\n    .map((font) => `family=${font}`)\n    .join(\"&\");\n  return urlifiedFonts\n    ? `https://fonts.googleapis.com/css2?${urlifiedFonts}&display=swap`\n    : \"\";\n};\n\nexport const defaultFontConfig = {\n  assetTypeFontSize: \"1.03em\",\n  assetTypeFont: \"Simonetta\",\n  assetNameFontSize: \"1.26em\",\n  assetNameFont: \"Simonetta\",\n  detailsFontSize: \"0.97em\",\n  detailsFont: \"PT Serif\",\n  trackFontSize: \"1.42em\",\n  trackFont: \"Simonetta\",\n};\n\nexport const makeMergedConfig = (config = {}): FontConfig => {\n  let merged = Object.assign({}, defaultFontConfig);\n  for (let key in merged) {\n    merged[key] = config[key] || merged[key];\n  }\n  return merged;\n};\n\nexport const makeFontStyles = (unmergedFonts: FontConfig) => {\n  let fonts: FontConfig = makeMergedConfig(unmergedFonts);\n  let googleFontUrl = createGoogleFontString(\n    fonts.assetTypeFont,\n    fonts.assetNameFont,\n    fonts.detailsFont,\n    fonts.trackFont\n  );\n\n  function toFontFamily(font) {\n    const fontName = font.split(\":\")[0].replace(/\\+/g, \" \");\n    return `\"${fontName}\"`;\n  }\n\n  return {\n    googleFontUrl,\n    type: {\n      fontFamily: toFontFamily(fonts.assetTypeFont),\n      fontSize: fonts.assetTypeFontSize,\n    },\n    assetName: {\n      fontFamily: toFontFamily(fonts.assetNameFont),\n      fontSize: fonts.assetNameFontSize,\n    },\n    details: {\n      fontFamily: toFontFamily(fonts.detailsFont),\n      fontSize: fonts.detailsFontSize,\n    },\n    track: {\n      fontFamily: toFontFamily(fonts.trackFont),\n      fontSize: fonts.trackFontSize,\n    },\n  };\n};\n","import React, { useState } from \"react\";\nimport { LabeledTextInput, LabeledNumberInput } from \"../LabeledInputs\";\nimport { AssetDocument } from \"../../Asset/asset\";\nimport { makeMergedConfig, defaultFontConfig } from \"../../Asset/fonts\";\nimport { assign } from \"lodash\";\n\nfunction numberFromEm(em) {\n  return +em.replace(\"em\", \"\");\n}\n\nfunction emFromNumber(number) {\n  return number + \"em\";\n}\n\nfunction FontInputs(props: {\n  label: string;\n  idPrefix: string;\n  font: string;\n  size: string;\n  handleFontChange(e);\n  handleSizeChange(e);\n}) {\n  return (\n    <div className=\"font-inputs\">\n      <LabeledTextInput\n        label={props.label + \" font\"}\n        id={`${props.idPrefix}-font-input`}\n        value={props.font}\n        handleChange={props.handleFontChange}\n      ></LabeledTextInput>\n      <LabeledNumberInput\n        label={props.label + \" size\"}\n        id={`${props.idPrefix}-size-input`}\n        value={numberFromEm(props.size)}\n        step=\"0.01\"\n        handleChange={props.handleSizeChange}\n      ></LabeledNumberInput>\n    </div>\n  );\n}\n\nexport default function FontsEdit(props: {\n  currentAsset: AssetDocument;\n  updateAsset(AssetDocument): void;\n}) {\n  const configuredFonts = makeMergedConfig(props.currentAsset.fonts || {});\n  const [fonts, updateFonts] = useState(configuredFonts);\n\n  function handleFontChange(setFontProperty) {\n    return (e) => {\n      const newFonts = { ...fonts };\n      setFontProperty(newFonts, e.currentTarget.value);\n      updateFonts(newFonts);\n    };\n  }\n\n  function handleSizeChange(setSizeProperty) {\n    return (value: number) => {\n      const newFonts = { ...fonts };\n      setSizeProperty(newFonts, emFromNumber(value));\n      updateFonts(newFonts);\n      props.currentAsset.fonts = newFonts;\n      props.updateAsset(props.currentAsset);\n    };\n  }\n\n  return (\n    <div className=\"editor-view\">\n      <h3>What fonts can I use?</h3>\n      <p>\n        The fonts from{\" \"}\n        <a\n          href=\"https://fonts.google.com/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Google Fonts\n        </a>{\" \"}\n        are supported. Put in the name of the font into the corresponding box\n        here and you're all set! Font names are case-sensitive. If you want to\n        use a Style other than the \"Regular\", click \"Select This Style\" on the\n        Google Fonts Page, then click \"Embed\" on the sidebar that pops up on the\n        right. Copy the part in bold ( such as <b>Red+Rose:wght@700</b> ) and\n        paste it in below.\n      </p>\n\n      <FontInputs\n        label=\"Asset Type\"\n        idPrefix=\"asset-type\"\n        font={fonts.assetTypeFont}\n        size={fonts.assetTypeFontSize}\n        handleFontChange={handleFontChange(\n          (fonts, val) => (fonts.assetTypeFont = val)\n        )}\n        handleSizeChange={handleSizeChange(\n          (fonts, val) => (fonts.assetTypeFontSize = val)\n        )}\n      ></FontInputs>\n      <FontInputs\n        label=\"Asset Name\"\n        idPrefix=\"asset-name\"\n        font={fonts.assetNameFont}\n        size={fonts.assetNameFontSize}\n        handleFontChange={handleFontChange(\n          (fonts, val) => (fonts.assetNameFont = val)\n        )}\n        handleSizeChange={handleSizeChange(\n          (fonts, val) => (fonts.assetNameFontSize = val)\n        )}\n      ></FontInputs>\n      <FontInputs\n        label=\"Details\"\n        idPrefix=\"details\"\n        font={fonts.detailsFont}\n        size={fonts.detailsFontSize}\n        handleFontChange={handleFontChange(\n          (fonts, val) => (fonts.detailsFont = val)\n        )}\n        handleSizeChange={handleSizeChange(\n          (fonts, val) => (fonts.detailsFontSize = val)\n        )}\n      ></FontInputs>\n      <FontInputs\n        label=\"Track\"\n        idPrefix=\"track\"\n        font={fonts.trackFont}\n        size={fonts.trackFontSize}\n        handleFontChange={handleFontChange(\n          (fonts, val) => (fonts.trackFont = val)\n        )}\n        handleSizeChange={handleSizeChange(\n          (fonts, val) => (fonts.trackFontSize = val)\n        )}\n      ></FontInputs>\n\n      <button\n        id=\"fonts-update-button\"\n        onClick={(e) => {\n          props.currentAsset.fonts = fonts;\n          props.updateAsset(props.currentAsset);\n        }}\n      >\n        update fonts\n      </button>\n      <button\n        onClick={() => {\n          props.currentAsset.fonts = defaultFontConfig;\n          assign(fonts, defaultFontConfig);\n          props.updateAsset(props.currentAsset);\n        }}\n      >\n        Reset to Default\n      </button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { AssetDocument, transformSvgString } from \"../../Asset/asset\";\nimport { AbilitiesEdit } from \"./AbilitiesEdit\";\nimport { TopEdit } from \"./TopEdit\";\nimport TrackEdit from \"./TrackEdit\";\nimport FontsEdit from \"./FontsEdit\";\n\ntype EditorView = \"JSON\" | \"top\" | \"abilities\" | \"track\" | \"fonts\" | \"export\";\n\nfunction ViewSwitchButton(props: {\n  view: EditorView;\n  activeView: EditorView;\n  children: string;\n  handleClick: (view: EditorView) => void;\n}) {\n  const classes =\n    props.view === props.activeView ? \"change-view selected\" : \"change-view\";\n  return (\n    <button\n      id={\"show-\" + props.view + \"-view\"}\n      className={classes}\n      onClick={() => props.handleClick(props.view)}\n    >\n      {props.children}\n    </button>\n  );\n}\n\nfunction ViewSwitcher(props: {\n  activeView: EditorView;\n  switchView: (view: EditorView) => void;\n}) {\n  return (\n    <div className=\"view-switcher\">\n      <ViewSwitchButton\n        view=\"top\"\n        activeView={props.activeView}\n        handleClick={(view) => props.switchView(view)}\n      >\n        TOP\n      </ViewSwitchButton>\n      <ViewSwitchButton\n        view=\"abilities\"\n        activeView={props.activeView}\n        handleClick={(view) => props.switchView(view)}\n      >\n        Abilities\n      </ViewSwitchButton>\n      <ViewSwitchButton\n        view=\"track\"\n        activeView={props.activeView}\n        handleClick={(view) => props.switchView(view)}\n      >\n        Track\n      </ViewSwitchButton>\n      <ViewSwitchButton\n        view=\"fonts\"\n        activeView={props.activeView}\n        handleClick={(view) => props.switchView(view)}\n      >\n        Fonts\n      </ViewSwitchButton>\n      <ViewSwitchButton\n        view=\"JSON\"\n        activeView={props.activeView}\n        handleClick={(view) => props.switchView(view)}\n      >\n        JSON\n      </ViewSwitchButton>\n      <ViewSwitchButton\n        view=\"export\"\n        activeView={props.activeView}\n        handleClick={(view) => props.switchView(view)}\n      >\n        export\n      </ViewSwitchButton>\n    </div>\n  );\n}\n\ntype DetailsEditorProps = {\n  currentAsset: AssetDocument;\n  updateAsset(asset): void;\n  askToDelete(): void;\n  previewAssetImage(): void;\n  downloadAssetImage(): void;\n};\n\ntype DetailsEditorState = {\n  activeView: EditorView;\n  editorJSON: string;\n  errorText: string;\n};\n\nfunction asJSON(val) {\n  return JSON.stringify(val, null, 2);\n}\n\nexport default class DetailsEditor extends React.Component<\n  DetailsEditorProps,\n  DetailsEditorState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editorJSON: \"\",\n      activeView: \"top\",\n      errorText: \"\",\n    };\n  }\n\n  switchView(view: EditorView) {\n    this.setState({\n      activeView: view,\n    });\n  }\n\n  handleJSONChange(json) {\n    try {\n      this.props.updateAsset(JSON.parse(json));\n      this.setState({\n        editorJSON: \"\",\n        errorText: \"\",\n      });\n    } catch (error) {\n      this.setState({\n        editorJSON: json,\n        errorText: \"Error parsing JSON: \" + error.toString(),\n      });\n    }\n  }\n\n  resetEditorJson() {\n    this.setState({\n      editorJSON: \"\",\n      errorText: \"\",\n    });\n  }\n\n  handleIconImport() {\n    //todo: move away from queryselecting and use React\n    const iconFileInput = document.querySelector(\n      \"#icon-fileselect\"\n    ) as HTMLInputElement;\n    const iconAuthorInput = document.querySelector(\n      \"#icon-author\"\n    ) as HTMLInputElement;\n\n    const file = iconFileInput.files[0];\n    if (file) {\n      var fileReader = new FileReader();\n      fileReader.onload = (e) => {\n        var svg = e.target.result as string;\n        this.props.currentAsset.icon = {\n          type: \"svg\",\n          name: file.name.split(\".\").slice(0, -1).join(\".\"),\n          author: iconAuthorInput.value,\n          svg: transformSvgString(svg),\n        };\n        this.props.updateAsset(this.props.currentAsset);\n      };\n      fileReader.readAsText(file);\n    } else {\n      alert(\"missing file\");\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"editor\">\n        <ViewSwitcher\n          activeView={this.state.activeView}\n          switchView={(view) => this.switchView(view)}\n        ></ViewSwitcher>\n        {this.state.activeView === \"top\" && (\n          <TopEdit\n            currentAsset={this.props.currentAsset}\n            updateAsset={(asset) => this.props.updateAsset(asset)}\n            askToDelete={() => this.props.askToDelete()}\n            handleIconImport={() => this.handleIconImport()}\n          ></TopEdit>\n        )}\n\n        {this.state.activeView === \"abilities\" && (\n          <AbilitiesEdit\n            currentAsset={this.props.currentAsset}\n            updateAsset={(asset) => this.props.updateAsset(asset)}\n          ></AbilitiesEdit>\n        )}\n\n        {this.state.activeView === \"track\" && (\n          <TrackEdit\n            currentAsset={this.props.currentAsset}\n            updateAsset={(asset) => this.props.updateAsset(asset)}\n          ></TrackEdit>\n        )}\n\n        {this.state.activeView === \"fonts\" && (\n          <FontsEdit\n            currentAsset={this.props.currentAsset}\n            updateAsset={(asset) => this.props.updateAsset(asset)}\n          ></FontsEdit>\n        )}\n\n        {this.state.activeView === \"JSON\" && (\n          <div className=\"editor-view\">\n            <div>\n              <textarea\n                className=\"interface-input thin-box-border\"\n                spellCheck=\"false\"\n                value={this.state.editorJSON || asJSON(this.props.currentAsset)}\n                onChange={(e) => this.handleJSONChange(e.currentTarget.value)}\n              ></textarea>\n            </div>\n            <div className=\"json-error-container\">\n              {this.state.errorText && (\n                <div className=\"json-error\">\n                  {this.state.errorText}\n                  <button onClick={() => this.resetEditorJson()}>\n                    Reset to valid state\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {this.state.activeView === \"export\" && (\n          <div className=\"editor-view\">\n            <div className=\" export vertical\">\n              <p>\n                Use the buttons below to get your asset in PNG format. Preview\n                will show you the generated image in the browser, while Download\n                will bring up your browser's save dialog.\n              </p>\n              <button\n                id=\"preview-download\"\n                onClick={() => this.props.previewAssetImage()}\n              >\n                {\" \"}\n                preview as image{\" \"}\n              </button>\n              <button\n                id=\"download\"\n                onClick={() => this.props.downloadAssetImage()}\n              >\n                {\" \"}\n                download as image{\" \"}\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import { AssetDocument } from \"../Asset/asset\";\nimport React from \"react\";\nimport DetailsEditor from \"./DetailsEditor/DetailsEditor\";\n\ntype SidePanelProps = {\n  currentAsset: AssetDocument;\n  updateAsset(asset: AssetDocument): void;\n  askToDelete(): void;\n  assetScale: string;\n  handleAssetScaleChange(newScale: string): void;\n  showScreen(screen): void;\n  previewAssetImage(): void;\n  downloadAssetImage(): void;\n};\n\nexport function SidePanel(props: SidePanelProps) {\n  return (\n    <div className=\"interface\">\n      <DetailsEditor\n        currentAsset={props.currentAsset}\n        updateAsset={props.updateAsset}\n        askToDelete={props.askToDelete}\n        previewAssetImage={props.previewAssetImage}\n        downloadAssetImage={props.downloadAssetImage}\n      ></DetailsEditor>\n\n      <div className=\"bottom-controls\">\n        <div>\n          <label>Scale (also affects Download size)</label>\n          <select\n            id=\"scale-select\"\n            onChange={(e) => props.handleAssetScaleChange(e.target.value)}\n            value={props.assetScale}\n          >\n            <option value=\"one-third\">250px by 350px</option>\n            <option value=\"one-half\">375px by 525px</option>\n            <option value=\"two-thirds\">500px by 700px</option>\n            <option value=\"full\">750px by 1050px</option>\n          </select>\n        </div>\n        <button\n          className=\"asset-back-button\"\n          onClick={() => props.showScreen(\"choose\")}\n        >\n          Back\n        </button>\n      </div>\n    </div>\n  );\n}\n","import {\n  AssetDocumentV1,\n  AssetDocument,\n  transformSvgString,\n  UnspecifiedAssetDocument,\n} from \"./asset\";\nfunction transformToV2(v1: AssetDocumentV1): AssetDocument {\n  const v2: AssetDocument = {\n    documentFormatVersion: 2,\n    type: v1.type,\n    name: v1.name,\n    writeIn: v1.writeIn,\n    track: v1.track,\n    description: v1.description,\n    abilities: v1.abilities,\n  };\n  if (typeof v1.fonts === \"object\") {\n    v2.fonts = {\n      assetTypeFontSize: v1.fonts.assetTypeFontSize,\n      assetTypeFont: v1.fonts.assetTypeFont,\n      assetNameFontSize: v1.fonts.assetNameFontSize,\n      assetNameFont: v1.fonts.assetNameFont,\n      detailsFontSize: v1.fonts.detailsFontSize,\n      detailsFont: v1.fonts.detailsFont,\n      trackFontSize: v1.fonts.trackFontSize,\n      trackFont: v1.fonts.trackFont,\n    };\n  }\n  if (typeof v1.icon === \"string\") {\n    v2.icon = v1.icon;\n  } else if (typeof v1.icon === \"object\") {\n    v2.icon = {\n      type: \"svg\",\n      author: v1.icon.author,\n      name: v1.icon.name,\n      svg: transformSvgString(v1.icon.svg),\n    };\n  }\n  return v2;\n}\n\nexport function transformToLatest(\n  schema: UnspecifiedAssetDocument\n): AssetDocument {\n  if (!schema.documentFormatVersion) {\n    return transformToV2(schema as AssetDocumentV1);\n  } else if (schema.documentFormatVersion === 2) {\n    return schema as AssetDocument;\n  }\n}\n","export let scaleRatio = {\n  full: 1,\n  \"two-thirds\": 2 / 3,\n  \"one-half\": 0.5,\n  \"one-third\": 1 / 3,\n};\n\nexport type AssetScale = \"one-third\" | \"one-half\" | \"two-thirds\" | \"full\";\n\nexport function calculateScale(): AssetScale {\n  if (window.innerHeight > 1070) {\n    return \"full\";\n  } else if (window.innerHeight > 750) {\n    return \"two-thirds\";\n  } else {\n    return \"one-half\";\n  }\n}\n","import React from \"react\";\nimport sanitize from \"./sanitize\";\n\nimport { scaleRatio, AssetScale } from \"./assetScaling\";\nimport { FontConfig, makeFontStyles } from \"./fonts\";\n\nconst WriteIn = (props: { writeIn?: string }) => {\n  return props.writeIn ? <div className=\"write-in\">{props.writeIn}</div> : null;\n};\n\nconst Description = (props: { description: string }) => {\n  return props.description ? (\n    <div className=\"description\">{props.description}</div>\n  ) : null;\n};\n\ninterface Ability {\n  name?: string;\n  filled: boolean;\n  text: string;\n}\nexport const AbilityDisplay = (props: { ability: Ability }) => {\n  const createAbilityName = (name) => {\n    if (name) {\n      return <span className=\"ability-name\">{name}</span>;\n    } else {\n      return \"\";\n    }\n  };\n\n  //TODO: investigate parsing markdown or custom markup instead of allowing em, ul, li\n  let sanitizedText = sanitize(props.ability.text);\n\n  return (\n    <div className=\"ability\">\n      <i className={props.ability.filled ? \"dot filled\" : \"dot unfilled\"}></i>\n      <div className=\"ability-description\">\n        {createAbilityName(props.ability.name)}\n        <span\n          className=\"ability-text\"\n          dangerouslySetInnerHTML={{ __html: sanitizedText }}\n        ></span>\n      </div>\n    </div>\n  );\n};\n\nconst TrackValue = (props: { track: number; value: number; scale: string }) => {\n  if (props.value === 0) {\n    return (\n      <div className=\"value\" key=\"zed\">\n        0\n      </div>\n    );\n  } else if (props.value <= props.track) {\n    return <div className=\"value number\">+{props.value}</div>;\n  } else {\n    return (\n      <div className=\"value empty\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          version=\"1.1\"\n          preserveAspectRatio=\"none\"\n          viewBox=\"0 0 100 100\"\n          height={95 * scaleRatio[props.scale]}\n          width={113 * scaleRatio[props.scale]}\n        >\n          <line\n            x1=\"0\"\n            y1=\"100\"\n            x2=\"100\"\n            y2=\"0\"\n            stroke=\"rgb(65,64,66)\"\n            style={{ strokeWidth: 3.5 }}\n          />\n        </svg>\n      </div>\n    );\n  }\n};\n\nconst TrackDisplay = (props: {\n  track: string[] | number;\n  scale: string;\n  style;\n}) => {\n  if (!props.track) {\n    return null;\n  } else {\n    let innerEntries = [];\n\n    if (Array.isArray(props.track)) {\n      innerEntries = props.track.map((entry, index) => {\n        return (\n          <div className=\"value text\" key={index}>\n            {entry}\n          </div>\n        );\n      });\n    } else {\n      let trackLength = Math.max(5, props.track);\n      for (let i = 0; i <= trackLength; i++) {\n        innerEntries.push(\n          <TrackValue\n            track={props.track}\n            value={i}\n            scale={props.scale}\n            key={i}\n          ></TrackValue>\n        );\n      }\n    }\n    return (\n      <div className=\"track\" style={props.style}>\n        {innerEntries}\n      </div>\n    );\n  }\n};\n\nconst IconDisplay = (props: {\n  icon: string | { svg: { d: string; fill: string; fillOpacity: string } };\n  scale: string;\n}) => {\n  if (typeof props.icon === \"string\") {\n    return (\n      <div className=\"header-circle\">\n        <i className=\"header-icon\">{props.icon}</i>\n      </div>\n    );\n  } else if (typeof props.icon === \"object\") {\n    return (\n      <div className=\"header-circle\">\n        <svg\n          height={154 * scaleRatio[props.scale]}\n          width={154 * scaleRatio[props.scale]}\n          viewBox=\"0 0 512 512\"\n        >\n          <g>\n            <path\n              d={props.icon.svg.d}\n              fill={props.icon.svg.fill}\n              fillOpacity={props.icon.svg.fillOpacity}\n            ></path>\n          </g>\n        </svg>\n      </div>\n    );\n  } else {\n    return null;\n  }\n};\n\ninterface Asset {\n  fonts?: FontConfig;\n  type: string;\n  icon?: string | { svg: { d: string; fill: string; fillOpacity: string } };\n  name: string;\n  writeIn?: string;\n  description: string;\n  abilities: Ability[];\n  track?: number | string[];\n}\n\ninterface AssetProps {\n  asset: Asset;\n  scale: AssetScale;\n}\n\nexport const AssetDisplay = (props: AssetProps) => {\n  let asset = props.asset;\n  let fonts = makeFontStyles(asset.fonts);\n\n  //TODO: consolidate fonts into one global link. Less calls and may fix the race condition with preview/Download and fonts.\n  return (\n    <div className={`asset ${props.scale}`}>\n      <link rel=\"stylesheet\" href={fonts.googleFontUrl} />\n      <div className=\"main-matter\">\n        <div className=\"top\">\n          <div className=\"type\" style={fonts.type}>\n            {asset.type}\n          </div>\n          <IconDisplay icon={asset.icon} scale={props.scale} />\n          <div className=\"asset-name\" style={fonts.assetName}>\n            {asset.name}\n          </div>\n        </div>\n        <div className=\"details\" style={fonts.details}>\n          <WriteIn writeIn={asset.writeIn}></WriteIn>\n          <Description description={asset.description} />\n          <div className=\"abilities\">\n            {asset.abilities.map((ability, index) => (\n              <AbilityDisplay ability={ability} key={index}></AbilityDisplay>\n            ))}\n          </div>\n        </div>\n      </div>\n      <TrackDisplay\n        track={asset.track}\n        scale={props.scale}\n        style={fonts.track}\n      />\n    </div>\n  );\n};\n","import sanitizer from \"sanitize-html\";\n\nexport default function sanitize(text) {\n  return sanitizer(text, {\n    allowedTags: [\"em\", \"ul\", \"li\"],\n    allowedAttributes: {},\n  });\n}\n","import React from \"react\";\nimport { AssetDocument } from \"../Asset/asset\";\nimport { AssetDisplay } from \"../Asset/AssetDisplay\";\nimport html2canvas from \"html2canvas\";\nimport { AssetScale } from \"../Asset/assetScaling\";\n\ntype DownloadProps = {\n  asset: AssetDocument;\n  scale: AssetScale;\n  goBackToMain: () => void;\n  preview: boolean;\n};\n\ntype DownloadState = {\n  canvas: HTMLCanvasElement;\n};\n\nexport default class Download extends React.Component<\n  DownloadProps,\n  DownloadState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      canvas: null,\n    };\n  }\n\n  saveImage() {\n    const link = document.createElement(\"a\");\n    link.href = this.state.canvas.toDataURL();\n    link.download = this.props.asset.name + \".png\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  componentDidMount() {\n    if (!this.state.canvas) {\n      window.scrollTo(0, 0);\n      const render = document.querySelector(\".render\");\n      html2canvas(render.firstChild as HTMLElement, {\n        allowTaint: true,\n      }).then((canvas) => {\n        this.setState({ canvas: canvas });\n      });\n    }\n  }\n\n  render() {\n    if (!this.state.canvas) {\n      return (\n        <div className=\"render\">\n          <AssetDisplay\n            asset={this.props.asset}\n            scale={this.props.scale}\n          ></AssetDisplay>\n        </div>\n      );\n    } else if (!this.props.preview) {\n      this.saveImage();\n      this.props.goBackToMain();\n      return null;\n    } else {\n      return (\n        <div className=\"preview-download\">\n          <div className=\"image-container\">\n            <img\n              src={this.state.canvas.toDataURL()}\n              alt={`${this.props.asset.name} asset`}\n            />\n          </div>\n          <div className=\"preview-download-help\">\n            <p>\n              Right click and 'Save image as...' to save. If the image is\n              truncated, try making your browser window bigger before pressing\n              'preview' or 'download as image'.\n            </p>\n            <button\n              id=\"done-downloading\"\n              onClick={() => this.props.goBackToMain()}\n            >\n              {\" \"}\n              close{\" \"}\n            </button>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n","import React from \"react\";\nimport { AssetDisplay } from \"../Asset/AssetDisplay\";\nimport { UnspecifiedAssetDocument } from \"../Asset/asset\";\nimport { transformToLatest } from \"../Asset/assetTransformation\";\n\nexport default function AssetChoice(props: {\n  handleClick();\n  asset: UnspecifiedAssetDocument;\n}) {\n  let transformedAsset = transformToLatest(props.asset);\n  return (\n    <div className=\"asset-choice\" onClick={props.handleClick}>\n      <AssetDisplay asset={transformedAsset} scale={\"one-third\"}></AssetDisplay>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { UnspecifiedAssetDocument } from \"../Asset/asset\";\nimport AssetChoice from \"./AssetChoice\";\n\nexport default function AssetSelection(props: {\n  chooseAsset: (asset, index) => void;\n  showNewScreen();\n  assets: UnspecifiedAssetDocument[];\n}) {\n  return (\n    <div className=\"horizontal\">\n      <div className=\"asset-selection\">\n        <div className=\"asset-selection-controls\">\n          {props.assets.map((asset, index) => {\n            return (\n              <AssetChoice\n                asset={asset}\n                key={asset.name + index}\n                handleClick={() => props.chooseAsset(asset, index)}\n              ></AssetChoice>\n            );\n          })}\n        </div>\n      </div>\n      <div className=\"vertical\">\n        <button onClick={props.showNewScreen}>ADD NEW ASSET</button>\n        {/* <button>FONTS</button> */}\n        {/* <button>EXPORT</button> */}\n      </div>\n    </div>\n  );\n}\n","export const ironclad = {\n  fonts: {\n    assetTypeFontSize: \"1.03em\",\n    assetTypeFont: \"Noto Sans JP\",\n    assetNameFontSize: \"1.76em\",\n    assetNameFont: \"Russo One\",\n    detailsFontSize: \"0.97em\",\n    detailsFont: \"Quicksand\",\n    trackFontSize: \"1.12em\",\n    trackFont: \"Krona One\",\n  },\n  type: \"combat talent\",\n  name: \"Ironclad\",\n  writeIn: \"\",\n  track: [\"LIGHTLY ARMORED\", \"GEARED FOR WAR\"],\n  description: \"If you wear high-tech armor...\",\n  abilities: [\n    {\n      filled: true,\n      text:\n        \"When you equip or adjust your armor, choose one. <li>Lightly armored: When you <em>Endure Harm</em> in a fight, add +1 and take +1 momentum on a hit.</li> <li>Geared for war: Mark encumbered. When you <em>Endure Harm</em> in a fight, add +2 and take +1 momentum on a hit.</li>\",\n    },\n    {\n      filled: false,\n      text: \"When you <em>Clash</em> while you are geared for war, add +1.\",\n    },\n    {\n      filled: false,\n      text:\n        \"When you <em>Compel</em> in a situation where strength of arms is a factor, add +2.\",\n    },\n  ],\n  icon: {\n    type: \"svg\",\n    author: \"Delapouite\",\n    name: \"Light Helm icon\",\n    svg:\n      '<svg style=\"height: 512px; width: 512px;\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><g class=\"\" style=\"touch-action: none;\" transform=\"translate(0,0)\"><path d=\"M246.488 29.5l-13.244 39.725 14.381 86.275h16.75l14.38-86.275L265.515 29.5h-19.026zM195 61.5l-40 30h63.709l-3.953-23.725 2.092-6.275H195zm100.152 0l2.092 6.275-3.953 23.725H357l-40-30h-21.848zM69.42 90.727L41.639 257.41 71 286.773V162.375l20.863-41.725L69.42 90.727zm373.16 0l-22.443 29.923L441 162.375v124.398l29.361-29.363-27.78-166.683zM117.563 109.5L89 166.625V400l110 82.5v-87.906l-80-32V211.576l35.393-72.076h72.316l-5-30H117.562zm172.728 0l-5 30h72.272L393 210.375v152.219l-80 32V482.5L423 400V166.625L394.437 109.5H290.291zm-124.684 48L137 215.758v3.742h238v-4.875L346.437 157.5h-64.146l-2.666 16h-47.25l-2.666-16h-64.102zM137 237.5v46h30v-46h-30zm96 0v46h46v-46h-46zm112 0v46h30v-46h-30zm-208 64v48.906l46.678 18.67 27.029-67.576H137zm93.092 0l-29.705 74.262L217 382.406v51.067l39 9.75 39-9.75v-51.067l16.613-6.644-29.705-74.262h-51.816zm71.201 0l27.03 67.576L375 350.406V301.5h-73.707z\" fill=\"#fff\" fill-opacity=\"1\"></path></g></svg>',\n  },\n};\n\nexport const lightbearer = {\n  fonts: {\n    assetTypeFontSize: \"1.03em\",\n    assetNameFontSize: \"1.26em\",\n    detailsFontSize: \"0.97em\",\n    trackFontSize: \"1.42em\",\n  },\n  type: \"ritual\",\n  name: \"Lightbearer\",\n  track: 6,\n  abilities: [\n    {\n      filled: true,\n      text:\n        \"When you focus on a source of light and capture its essence, roll +wits. On a strong hit, set your light track to +6. On a weak hit, make it +3. Then, when you make a move to overcome or navigate darkness, you may add +2 and suffer -1 light.\",\n    },\n    {\n      text:\n        \"You may use your light to <em>Strike</em> or <em>Clash</em> against a dark-dwelling foe. Choose the amount of light to unleash, and roll +light (instead of +iron or +edge). Suffer -light equal to that amount. On a hit, your harm is 1+your unleashed light.\",\n    },\n    {\n      text:\n        \"When you perform this ritual, add +1 and take +1 momentum on a hit.\",\n    },\n  ],\n  icon: {\n    type: \"svg\",\n    author: \"Lorc\",\n    name: \"Explosion Rays icon\",\n    svg:\n      '<svg class=\"Icon\" style=\"height: 512px; width: 512px;\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><g class=\"\" style=\"touch-action: none;\" transform=\"translate(0,0)\"><path d=\"M54.184 19.512l116.02 144.838c-11.806 9.74-21.4 22.066-27.923 36.095L20.493 142.73v62.993l113.983 19.172c-1.12 6.056-1.707 12.295-1.707 18.67 0 3.502.177 6.965.52 10.378l-72.376 27.7 79.467.687c4.165 10.173 9.917 19.534 16.948 27.775L20.492 441.7v52.484h47.336l105.87-168.65c11.644 8.795 25.212 15.165 39.945 18.366l-23.7 150.284H294.22L253.25 344.69c8.668-1.524 16.964-4.14 24.744-7.7l37.262 42.268-21.326-51.365c6.885-4.792 13.16-10.402 18.68-16.692l182.533 146.61V348.556L329.43 284.865c4.29-9.722 7.118-20.227 8.195-31.238l84.7-25.93-86.78-7.008c-2.26-9.89-5.955-19.242-10.852-27.825l170.452-87.398V23.924L311.918 175.15c-5.33-5.95-11.342-11.28-17.912-15.86l15.533-38.382-29.968 29.967c-9.608-4.595-20.034-7.74-30.996-9.148L269.89 19.512h-40.12l1.27 121.478c-19.017.808-36.716 6.816-51.706 16.64L94.102 19.51H54.184z\" fill=\"#fff\" fill-opacity=\"1\"></path></g></svg>',\n  },\n};\n\nexport const berserker = {\n  type: \"combat talent\",\n  name: \"Berserker\",\n  writeIn: \"\",\n  track: 0,\n  description: \"If you are clad only in animal pelts...\",\n  abilities: [\n    {\n      filled: true,\n      name: \"\",\n      text:\n        \"When you <em>Secure an Advantage</em> or <em>Compel</em> by embodying your wild nature, add +1 and take +1 momentum on a hit.\",\n    },\n    {\n      filled: false,\n      name: \"\",\n      text:\n        \"When you <em>Strike</em> and score a hit, you may inflict +1 harm. If you do, choose one. <li>Push yourself: <em>Endure Harm</em> (1 harm).</li> <li>Lose yourself: <em>Endure Stress</em> (1 stress).</li>\",\n    },\n    {\n      filled: false,\n      name: \"\",\n      text:\n        \"When you <em>Endure Harm</em> in a fight, and your health is above 0, you may let the pain inflame your wildness (decide before rolling). If you then score a strong hit and choose to embrace the pain, take +momentum equal to your remaining health. A weak hit counts as a miss.\",\n    },\n  ],\n  icon: \"▿\",\n};\n\nexport const caveLion = {\n  documentFormatVersion: 2,\n  type: \"companion\",\n  name: \"Cave Lion\",\n  writeIn: \"Name\",\n  track: 4,\n  description: \"Your cat takes down its prey.\",\n  abilities: [\n    {\n      filled: false,\n      name: \"Eager\",\n      text:\n        \"When your cat chases down big game, you may <em>Resupply</em> with +edge (instead of +wits). If you do, take +1 supply or +1 momentum on a strong hit.\",\n    },\n    {\n      filled: false,\n      name: \"Inescapable\",\n      text:\n        \"When you <em>Enter the Fray</em> or <em>Strike</em> by sending your cat to attack, roll +edge. On a hit, take +2 momentum.\",\n    },\n    {\n      filled: false,\n      name: \"Protective\",\n      text:\n        \"When you <em>Make Camp</em>, your cat is alert to trouble. If you or an ally choose to relax, take +1 spirit. If you focus, take +1 momentum.\",\n    },\n  ],\n  icon: {\n    type: \"svg\",\n    author: \"Delapouite\",\n    name: \"Feline icon\",\n    svg: {\n      d:\n        \"M110.056 64.815c-4.234.027-8.355.587-12.337 1.799C83.13 71.054 72.93 77.03 65.24 87.333c-7.691 10.303-13.122 25.717-15.516 49.713-.669 6.708 2.012 18.384 7.75 30.986 5.738 12.602 14.248 26.276 23.829 38.387l2.49 3.146-.678 3.955c-3.097 18.091-3.644 50.706-.252 68.778.836 4.454 5.766 14.497 13.611 26.296 7.846 11.8 18.412 25.829 30.032 40.944 23.239 30.23 50.678 64.773 69.81 96.547.024.038.347.525 2.139.886 1.791.362 4.605.28 7.127-.35 2.441-.609 4.524-1.766 5.338-2.458-9.946-42.286-16.14-84.185-37.51-125.14l-10.102-19.358 20.809 6.617c21.64 6.882 48.718 8.897 73.396 7.719 24.679-1.179 47.26-5.681 58.868-10.362l5.648-2.277 4.215 4.397c43.225 45.089 73.427 98.048 112.644 140.935.12.132-.139.16.91.088 1.05-.072 3-.714 4.706-1.914 1.705-1.2 3.106-2.882 3.722-4.234.617-1.353.659-2.086.268-3.149-20.396-55.487-30.565-109.894-61.84-162.258l-2.103-3.521 1.279-3.9c6.869-20.923 17.852-42.768 42.902-60.303l4.535-3.176 4.881 2.617c11.454 6.145 19.123 5.873 25.69 1.936 13.132-7.875 24.15-23.88 28.625-37.784l-14.768-8.31-.943-3.746c-4.025-15.96-8.255-25.48-14.625-32.719-6.37-7.24-15.576-12.896-30.977-19.543l-6.426-2.773 1.104-6.91c.89-5.57.052-11.481-1.184-17.768-36.228 29.915-52.892 64.4-86.533 100.086l-3.197 3.39-4.613-.652c-57.84-8.187-142.926-5.257-198.455 1.436-6.045.728-11.262-1.14-16.34-3.733-5.078-2.593-9.996-6.2-14.475-10.492-8.957-8.584-16.938-19.87-16.01-33.258.654-9.426 2.683-17.048 7.006-23.01 4.323-5.961 11.13-9.434 17.815-10.27 13.368-1.669 26.916 3.833 42.058 10.04 30.285 12.415 65.987 29.01 93.022 21.717 10.554-2.848 30.674-20.089 44.4-37.834 6.863-8.873 12.442-17.861 15.377-24.528 1.339-3.041 2.013-5.487 2.24-6.923-.507-.106-1.153-.163-2.355-.08-2.665.182-7.069 1.375-12.56 3.814-10.985 4.877-26.237 14.423-44.675 26.896-11.984 8.108-26.017 8.386-38.992 5.153-12.975-3.233-25.743-9.626-38.58-16.04-19.255-9.619-38.213-18.81-55.45-20.077a53.657 53.657 0 0 0-4.27-.147zm343.096 73.006l9.832 22.123-22.474-3.512 12.642-18.611zM75.28 308.858c-14.235 49.028-35.548 97.072-55.633 132.947-.014.026-.02.015-.03.028a.651.651 0 0 1 .122.207c.258.592 1.295 1.961 2.856 3.035 1.56 1.074 3.553 1.828 4.945 2.008 1.391.18 1.836-.11 1.84-.114 33.669-24.914 58.717-55.4 83.47-85.668l-.613-.794c-11.682-15.197-22.427-29.428-30.75-41.946-2.25-3.384-4.321-6.6-6.207-9.703zM19.615 441.833c-.108-.114-.099.11 0 0zm297.377-119.485c-7.129 2.366-15.533 4.408-24.863 6.022-12.418 40.091-33.327 77.867-52.203 112.605l-.141.26-.158.25c-.31.491-.252.186-.049.783s1.012 1.81 2.27 2.707c2.514 1.796 4.82 2.374 7.208.23l.047-.04.047-.041c32.285-28.17 59.254-61.458 85.242-102.867-5.621-6.799-11.396-13.455-17.4-19.909z\",\n      fill: \"#fff\",\n      fillOpacity: \"1\",\n      viewBox: \"0 0 512 512\",\n    },\n  },\n};\n","import React from \"react\";\n\nexport default function AssetCardButton(props: {\n  text: string;\n  handleClick();\n}) {\n  return (\n    <div className=\"asset-choice\" onClick={props.handleClick}>\n      <div className=\"add-new-asset asset one-third\">\n        <div className=\"add-new-asset-text\">{props.text}</div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { createBlankAsset, UnspecifiedAssetDocument } from \"../Asset/asset\";\nimport { ironclad, lightbearer, caveLion } from \"../Asset/exampleAssets\";\nimport AssetChoice from \"./AssetChoice\";\nimport AssetCardButton from \"./AssetCardButton\";\nimport { cloneDeep } from \"lodash\";\n\nexport default function AssetCreation(props: {\n  createAsset(asset: UnspecifiedAssetDocument);\n  showChooseScreen();\n}) {\n  return (\n    <div className=\"asset-selection\">\n      <h3>Create a blank asset or copy an example:</h3>\n      <div className=\"asset-selection-controls\">\n        <AssetCardButton\n          text=\"Blank Asset\"\n          handleClick={() => props.createAsset(createBlankAsset())}\n        ></AssetCardButton>\n        {[ironclad, lightbearer, caveLion].map((example, index) => {\n          return (\n            <AssetChoice\n              key={index}\n              asset={example}\n              handleClick={() => props.createAsset(cloneDeep(example))}\n            ></AssetChoice>\n          );\n        })}\n      </div>\n      <button onClick={props.showChooseScreen}>CANCEL</button>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"issues\">\n        Feel free to look at the{\" \"}\n        <a href=\"https://github.com/effortlessmountain/ironsworn-asset-workbench\">\n          code\n        </a>\n        . Have a suggestion or run into a bug?{\" \"}\n        <a href=\"https://github.com/effortlessmountain/ironsworn-asset-workbench/issues\">\n          File an issue\n        </a>\n        or contact EffortlessMountain on the Ironsworn discord server.\n      </p>\n      <p className=\"credits\">\n        Ironsworn and the official Ironsworn assets Copyright ©2020 Shawn Tomkin\n        and used under the Creative Commons Attribution-NonCommercial-\n        ShareAlike 4.0 International license.\n      </p>\n    </footer>\n  );\n}\n","import React from \"react\";\nimport { SidePanel } from \"./AssetEditor/AssetEditor\";\nimport { AssetDocument, UnspecifiedAssetDocument } from \"./Asset/asset\";\nimport { transformToLatest } from \"./Asset/assetTransformation\";\nimport { calculateScale, AssetScale } from \"./Asset/assetScaling\";\nimport { AssetDisplay } from \"./Asset/AssetDisplay\";\nimport Download from \"./Export/Download\";\nimport AssetSelection from \"./Collections/AssetSelection\";\nimport AssetCreation from \"./Collections/AssetCreation\";\nimport { Collection, createCollection } from \"./Collections/collection\";\nimport { putLoneAssetIntoCollection } from \"./Collections/collectionTransformation\";\nimport { Footer } from \"./Footer\";\n\ntype Screen = \"choose\" | \"new\" | \"edit\" | \"preview-download\";\n\ntype AppState = {\n  currentAsset: AssetDocument;\n  currentCollection: Collection;\n  currentAssetIndex: number;\n  assetScale: AssetScale;\n  currentScreen: Screen;\n  previewDownload: boolean;\n};\n\nexport function sussCurrentCollection(maybeCollections, maybeAsset) {\n  let startingCollection = null;\n  if (maybeCollections && maybeCollections.length > 0) {\n    startingCollection = maybeCollections[0];\n  } else {\n    if (maybeAsset) {\n      startingCollection = putLoneAssetIntoCollection(maybeAsset);\n    } else {\n      startingCollection = createCollection();\n    }\n  }\n  return startingCollection;\n}\n\nexport default class App extends React.Component<{}, AppState> {\n  constructor(props) {\n    super(props);\n\n    let maybeCollections = this.maybeGetLocalCollections();\n    let maybeAsset = this.maybeGetLocalAsset();\n    let startingCollection = sussCurrentCollection(\n      maybeCollections,\n      maybeAsset\n    );\n\n    let startingScale = calculateScale();\n\n    this.state = {\n      currentAsset: null,\n      currentAssetIndex: null,\n      currentCollection: startingCollection,\n      assetScale: startingScale,\n      currentScreen: \"choose\",\n      previewDownload: true,\n    };\n  }\n\n  maybeGetLocalCollections(): Collection[] {\n    const maybeCollections = window.localStorage.getItem(\"collections\");\n    if (maybeCollections) {\n      try {\n        return JSON.parse(maybeCollections);\n      } catch (error) {\n        window.alert(\"Error parsing local collections: \" + error.toString());\n      }\n    }\n    return null;\n  }\n\n  maybeGetLocalAsset(): UnspecifiedAssetDocument {\n    const maybeAsset = window.localStorage.getItem(\"currentAsset\");\n    if (maybeAsset) {\n      try {\n        return JSON.parse(maybeAsset);\n      } catch (error) {\n        window.alert(\"Error parsing local asset: \" + error.toString());\n      }\n    }\n    return null;\n  }\n\n  handleAssetScaleChange(newScale) {\n    this.setState({ assetScale: newScale });\n  }\n\n  persistCollection(collection) {\n    window.localStorage.setItem(\"collections\", JSON.stringify([collection]));\n  }\n\n  updateAsset(asset) {\n    this.setState((state) => {\n      state.currentCollection.assets[state.currentAssetIndex] = asset;\n      this.persistCollection(state.currentCollection);\n      return {\n        currentAsset: transformToLatest(asset),\n      };\n    });\n  }\n\n  askToDelete() {\n    if (window.confirm(\"Delete this asset?\")) {\n      this.setState((state) => {\n        state.currentCollection.assets.splice(state.currentAssetIndex, 1);\n        this.persistCollection(state.currentCollection);\n        return {\n          currentCollection: state.currentCollection,\n          currentScreen: \"choose\",\n        };\n      });\n    }\n  }\n\n  createAsset(asset) {\n    this.setState((state) => {\n      let index = state.currentCollection.assets.push(asset) - 1;\n      window.localStorage.setItem(\n        \"collections\",\n        JSON.stringify([state.currentCollection])\n      );\n      return {\n        currentAsset: transformToLatest(asset),\n        currentAssetIndex: index,\n        currentCollection: state.currentCollection,\n        currentScreen: \"edit\",\n      };\n    });\n  }\n\n  chooseAsset(asset, index) {\n    this.setState({\n      currentAsset: transformToLatest(asset),\n      currentAssetIndex: index,\n      currentScreen: \"edit\",\n    });\n  }\n\n  showScreen(screen) {\n    this.setState({ currentScreen: screen });\n  }\n\n  previewAssetImage() {\n    this.setState({ currentScreen: \"preview-download\", previewDownload: true });\n  }\n\n  downloadAssetImage() {\n    this.setState({\n      currentScreen: \"preview-download\",\n      previewDownload: false,\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <header className=\"app-header\">\n          <h2>\n            Asset Workbench <span className=\"app-version\">v0.11.0</span>\n          </h2>\n        </header>\n        {this.state.currentScreen === \"preview-download\" && (\n          <Download\n            asset={this.state.currentAsset}\n            scale={this.state.assetScale}\n            goBackToMain={() => this.showScreen(\"edit\")}\n            preview={this.state.previewDownload}\n          ></Download>\n        )}\n\n        {this.state.currentScreen === \"choose\" && (\n          <AssetSelection\n            chooseAsset={(asset, index) => this.chooseAsset(asset, index)}\n            showNewScreen={() => this.showScreen(\"new\")}\n            assets={this.state.currentCollection.assets}\n          ></AssetSelection>\n        )}\n\n        {this.state.currentScreen === \"new\" && (\n          <AssetCreation\n            createAsset={(asset) => this.createAsset(asset)}\n            showChooseScreen={() => this.showScreen(\"choose\")}\n          ></AssetCreation>\n        )}\n\n        {this.state.currentScreen === \"edit\" && (\n          <div className=\"container\">\n            <div className=\"assets\">\n              <AssetDisplay\n                asset={this.state.currentAsset}\n                scale={this.state.assetScale}\n              ></AssetDisplay>\n            </div>\n            <SidePanel\n              currentAsset={this.state.currentAsset}\n              updateAsset={(asset) => this.updateAsset(asset)}\n              askToDelete={() => this.askToDelete()}\n              assetScale={this.state.assetScale}\n              handleAssetScaleChange={(e) => this.handleAssetScaleChange(e)}\n              showScreen={(screen) => this.showScreen(screen)}\n              previewAssetImage={() => this.previewAssetImage()}\n              downloadAssetImage={() => this.downloadAssetImage()}\n            ></SidePanel>\n          </div>\n        )}\n        <Footer></Footer>\n      </div>\n    );\n  }\n}\n","import { Collection } from \"./collection\";\nimport { transformToLatest } from \"../Asset/assetTransformation\";\nimport { UnspecifiedAssetDocument } from \"../Asset/asset\";\n\nexport function putLoneAssetIntoCollection(\n  asset: UnspecifiedAssetDocument\n): Collection {\n  return {\n    name: \"Default Collection\",\n    assets: [transformToLatest(asset)],\n  };\n}\n","import { AssetDocument } from \"../Asset/asset\";\n\nexport type Collection = {\n  name: string;\n  assets: AssetDocument[];\n};\n\nexport function createCollection(name = \"Default Collection\"): Collection {\n  return {\n    name: name,\n    assets: [],\n  };\n}\n","import \"./index.css\";\nimport \"./Asset/asset.css\";\nimport App from \"./App\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nReactDOM.render(<App></App>, document.querySelector(\".app-container\"));\n"],"sourceRoot":""}